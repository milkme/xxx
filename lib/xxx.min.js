(function(g){var e={Template:{suffix:"}",prefix:"@{"}};function c(){this.data={};this.count=0;if(typeof c.prototype.get!="function"){c.prototype.put=function(l,m){if(typeof l==="object"){throw new Error("Parameter key must not be a object.");
}if(this.contains(l)){var k=this.data[l];this.data[l]=m;return k;}this.data[l]=m;this.count++;return m;};c.prototype.putAll=function(l){if(l instanceof c){if(l.count>0){var k=this;
l.each(function(m,n){k.put(m,n);});}return this;}else{throw new Error("Parameter must be instance of Map.");}};c.prototype.get=function(k){return this.data[k];
};c.prototype.remove=function(l){if(this.contains(l)){var k=this.data[l];delete this.data[l];this.count--;return k;}return null;};c.prototype.removeAll=c.prototype.clear=function(){var k=this.count;
this.data={};this.count=0;return k;};c.prototype.contains=c.prototype.containsKey=function(k){return this.data.hasOwnProperty(k);};c.prototype.containsValue=function(m){for(var l in this.data){if(this.data[l]==m){return true;
}}return false;};c.prototype.keys=function(){var l=new Array();for(var m in this.data){l.push(m);}return l;};c.prototype.values=function(){var l=new Array();
for(var m in this.data){l.push(this.data[m]);}return l;};c.prototype.toKvString=c.prototype.tostring=function(m,n){m=m||"&";n=n||"=";var k="";for(var l in this.data){k+=l+n+this.data[l]+m;
}if(this.count>0){k=k.substring(0,k.length-1);}return k;};c.prototype.eachKeys=function(n){var m=0;for(var l in this.data){n.call(l,m++);}};c.prototype.eachValues=function(n){var m=0;
for(var l in this.data){n.call(this.data[l],m++);}};c.prototype.each=function(o){var n=0;for(var m in this.data){var l=this.data[m];o.call({key:m,value:l},m,this.data[m],n++);
}};c.prototype.size=function(){return this.count;};c.prototype.getData=function(){return this.data;};c.prototype.equals=function(n){if(!n instanceof c){throw new Error("parameter error.");
}if(this.count==0&&n.size()==0){return true;}var l=this.data,m=n.getData();for(var k in l){if(l[k]!=m[k]){return false;}}for(var k in m){if(l[k]!=m[k]){return false;
}}return true;};}return this;}function i(k){this.data=k;if(typeof i.prototype.init!="function"){i.prototype.set=function(l){this.data=l;return this;};i.prototype.init=function(){if(!this.data instanceof Array){throw new Error("parameter error .");
}return this;};i.prototype.size=function(){return this.data.length;};i.prototype.reverse=function(){this.data.reverse();return this;};i.prototype.next=function(){var l=this.data.shift();
this.data.push(l);return l;};i.prototype.last=function(){var l=this.data.pop();this.data.unshift(l);return l;};i.prototype.setStart=function(l){if(!l instanceof Number){throw new Error("parameter error .");
}if(l>=this.data.length){throw new Error("Value must be less than "+this.data.length+" .");}if(l>0&&this.data.length>1){var m=this.data.splice(0,l);this.data=this.data.concat(m);
}return this;};}}function b(k){this.url=k||g.location;this.map=new c();if(typeof b.prototype.setUrl!="function"){b.prototype.setUrl=function(l){this.clear();
this.url=l;this.init();};b.prototype.toString=function(){var l=this.url+"?";l+=this.map.toKvString();return l;};b.prototype.setParam=function(l,m){this.map.put(l,m);
return this;};b.prototype.setParamsMap=function(m,l){if(l){this.map.clear();}this.map.putAll(m);return this;};b.prototype.getParamValue=function(l){return this.map.get(l);
};b.prototype.getAllParams=function(){return this.map;};b.prototype.paramEquals=function(l,m){if(f.isEmpty(l)){return false;}var n=this.getParamValue(l);
return n==m;};b.prototype.clear=function(){this.map.clear();this.url="";};b.prototype.go=function(){g.location.href=this.toString();};b.prototype.replace=function(){g.location.replace(this.toString());
};b.prototype.init=function(){if(typeof this.url==="object"&&this.url.hasOwnProperty("href")){this.url=this.url.href;}var m=this.url.split("?");if(m.length==1){}else{if(m.length==2){this.url=m[0];
m=m[1].split("&");for(var n=0,l=m.length;n<l;n++){var o=m[n].split("=");this.map.put(o[0],o[1]);}}else{throw new Error("Bad URL format.");}}return this;
};b.prototype.containsKey=function(l){return this.map.contains(l);};b.prototype.containsValue=function(l){return this.map.containsValue(l);};b.prototype.containsAll=function(l,m){return this.map.get(l)===m;
};b.prototype.getBaseUrl=function(){return this.url;};}return this.init();}function d(o,m,n,k){this.tplStr=o instanceof Array?o.join(""):o;this.data=m;
this.rule=n;this.alias=k;this.txtOutLimit="...";this.init=function(){if(k){if(this.data instanceof Array){for(var q=0,p=this.data.length;q<p;q++){this.data[q]=l(this.data[q],this.alias);
}}else{this.data=l(this.data,this.alias);}}};this.html=function(){var q=new Array(),s=this;if(!s.data||!s.tplStr){throw new Error("tplString and data cannot be null.");
}if(this.data instanceof Array){for(var r=0,p=s.data.length;r<p;r++){q.push(t(s.tplStr,s.data[r],s.rule));}}else{q.push(t(s.tplStr,s.data,s.rule));}return q.join("");
function t(x,v,z){if(z){for(var C in z){var B=v[C];var D=z[C];if(D!=null&&D!=undefined){var y=D[B];if(!y&&D.def){y=D.def;}y?v[C]=y:"";}}}var E=x;for(var u in v){var C=u;
if(/^\d+/.test(u)){C="tpl_i_"+u;}var w=v[u],A=new RegExp("@{"+C+"}","gm");E=E.replace(A,w);}return E;}};this.update=function(p){this.data=p;this.init();
return this;};this.init();return this;function l(t,s){for(var q in s){if(s[q] instanceof Array){for(var r=0,p=s[q].length;r<p;r++){t[s[q][r]]=t[q];}}else{t[s[q]]=t[q];
}}return t;}}function h(k,m,n,l){this.tpl=k instanceof Array?k.join(""):k;this.data=m;this.rule=n;this.alias=l;this.propMatcher=new RegExp(e.Template.prefix+"[a-zA-Z0-9_s'\"=.[]]*?"+e.Template.suffix,"g");
this.funcMatcher=new RegExp(e.Template.prefix+":(?<exp>[a-z]*)[a-zA-Z0-9_s'\"=.[]]*?"+e.Template.suffix+".*?"+e.Template.prefix+":/k<exp>"+e.Template.suffix,"g");
if(typeof h.prototype.html!=="function"){h.prototype.init=function(){return this;};h.prototype.update=function(o){};h.prototype.html=function(){};}return this.init();
}function j(){}var f={isUndefined:function(k){return k===undefined&&typeof k==="undefined";},isNull:function(k){return this.isUndefined(k)||null===k;},isEmpty:function(k){if(this.isNull(k)){return true;
}return k==="";}};var a={Global:{},Map:c,Url:b,Loop:i,STemplate:d,Template:h,XTemplate:j,Utils:f};if(typeof define==="function"&&define.amd){define("xxx",[],function(){return a;
});}else{g.xxx=a;}})(window);